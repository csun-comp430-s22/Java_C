<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Tokenizer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lexer</a> &gt; <a href="index.source.html" class="el_package">tokenizer</a> &gt; <span class="el_source">Tokenizer.java</span></div><h1>Tokenizer.java</h1><pre class="source lang-java linenums">package tokenizer;

import java.util.List;
import java.util.ArrayList;
import tokenizer.tokens.*;

public class Tokenizer {
    private final String input;
    private int offset;

<span class="fc" id="L11">    public Tokenizer(final String input) {</span>
<span class="fc" id="L12">        this.input = input;</span>
<span class="fc" id="L13">        offset = 0;</span>
<span class="fc" id="L14">    }</span>

    public Token tokenizeSingle() throws TokenizerException {
<span class="fc" id="L17">        Token retval = null;</span>
<span class="fc" id="L18">        skipWhitespace();</span>
<span class="fc bfc" id="L19" title="All 2 branches covered.">        if (offset &lt; input.length()) {</span>
<span class="fc" id="L20">            retval = tryTokenizeVariableOrKeyword();</span>
<span class="fc bfc" id="L21" title="All 2 branches covered.">            if (retval == null) {</span>
<span class="fc bfc" id="L22" title="All 2 branches covered.">                if (input.startsWith(&quot;(&quot;, offset)) {</span>
<span class="fc" id="L23">                    offset += 1;</span>
<span class="fc" id="L24">                    retval = new LeftParenToken();</span>
<span class="fc bfc" id="L25" title="All 2 branches covered.">                } else if (input.startsWith(&quot;)&quot;, offset)) {</span>
<span class="fc" id="L26">                    offset += 1;</span>
<span class="fc" id="L27">                    retval = new RightParenToken();</span>
<span class="fc bfc" id="L28" title="All 2 branches covered.">                } else if (input.startsWith(&quot;{&quot;, offset)) {</span>
<span class="fc" id="L29">                    offset += 1;</span>
<span class="fc" id="L30">                    retval = new LCurlyToken();</span>
<span class="fc bfc" id="L31" title="All 2 branches covered.">                } else if (input.startsWith(&quot;}&quot;, offset)) {</span>
<span class="fc" id="L32">                    offset += 1;</span>
<span class="fc" id="L33">                    retval = new RCurlyToken();</span>
<span class="fc bfc" id="L34" title="All 2 branches covered.">                } else if (input.startsWith(&quot;[&quot;, offset)) {</span>
<span class="fc" id="L35">                    offset += 1;</span>
<span class="fc" id="L36">                    retval = new LBracketToken();</span>
<span class="fc bfc" id="L37" title="All 2 branches covered.">                } else if (input.startsWith(&quot;]&quot;, offset)) {</span>
<span class="fc" id="L38">                    offset += 1;</span>
<span class="fc" id="L39">                    retval = new RBracketToken();</span>
<span class="fc bfc" id="L40" title="All 2 branches covered.">                } else if (input.startsWith(&quot;;&quot;, offset)) {</span>
<span class="fc" id="L41">                    offset += 1;</span>
<span class="fc" id="L42">                    retval = new SemicolonToken();</span>
<span class="fc bfc" id="L43" title="All 2 branches covered.">                } else if (input.startsWith(&quot;.&quot;, offset)) {</span>
<span class="fc" id="L44">                    offset += 1;</span>
<span class="fc" id="L45">                    retval = new DotOperatorToken();</span>
<span class="fc bfc" id="L46" title="All 2 branches covered.">                } else if (input.startsWith(&quot;,&quot;, offset)) {</span>
<span class="fc" id="L47">                    offset += 1;</span>
<span class="fc" id="L48">                    retval = new CommaToken();</span>
<span class="fc bfc" id="L49" title="All 2 branches covered.">                } else if (input.startsWith(&quot;:&quot;, offset)) {</span>
<span class="fc" id="L50">                    offset += 1;</span>
<span class="fc" id="L51">                    retval = new ColonToken();</span>
<span class="fc bfc" id="L52" title="All 2 branches covered.">                } else if (input.startsWith(&quot;+&quot;, offset)) {</span>
<span class="fc" id="L53">                    offset += 1;</span>
<span class="fc" id="L54">                    retval = new PlusToken();</span>
<span class="fc bfc" id="L55" title="All 2 branches covered.">                } else if (input.startsWith(&quot;-&quot;, offset)) {</span>
<span class="fc" id="L56">                    offset += 1;</span>
<span class="fc" id="L57">                    retval = new MinusToken();</span>
<span class="fc bfc" id="L58" title="All 2 branches covered.">                } else if (input.startsWith(&quot;*&quot;, offset)) {</span>
<span class="fc" id="L59">                    offset += 1;</span>
<span class="fc" id="L60">                    retval = new MultiplicationToken();</span>
<span class="fc bfc" id="L61" title="All 2 branches covered.">                } else if (input.startsWith(&quot;/&quot;, offset)) {</span>
<span class="fc" id="L62">                    offset += 1;</span>
<span class="fc" id="L63">                    retval = new DivisionToken();</span>
<span class="fc bfc" id="L64" title="All 2 branches covered.">                } else if (input.startsWith(&quot;%&quot;, offset)) {</span>
<span class="fc" id="L65">                    offset += 1;</span>
<span class="fc" id="L66">                    retval = new ModulusToken();</span>
<span class="fc bfc" id="L67" title="All 2 branches covered.">                } else if (input.startsWith(&quot;&lt;&quot;, offset)) {</span>
<span class="pc bpc" id="L68" title="1 of 4 branches missed.">                    if (offset + 1 &lt; input.length() &amp;&amp; input.charAt(offset + 1) == '=') {</span>
<span class="fc" id="L69">                        offset += 2;</span>
<span class="fc" id="L70">                        retval = new LessThanOrEqualToken();</span>
                    } else {
<span class="fc" id="L72">                        offset += 1;</span>
<span class="fc" id="L73">                        retval = new LessThanToken();</span>
                    }
<span class="fc bfc" id="L75" title="All 2 branches covered.">                } else if (input.startsWith(&quot;&gt;&quot;, offset)) {</span>
<span class="pc bpc" id="L76" title="1 of 4 branches missed.">                    if (offset + 1 &lt; input.length() &amp;&amp; input.charAt(offset + 1) == '=') {</span>
<span class="fc" id="L77">                        offset += 2;</span>
<span class="fc" id="L78">                        retval = new GreaterThanOrEqualToken();</span>
                    } else {
<span class="fc" id="L80">                        offset += 1;</span>
<span class="fc" id="L81">                        retval = new GreaterThanToken();</span>
                    }
<span class="fc bfc" id="L83" title="All 2 branches covered.">                } else if (input.startsWith(&quot;=&quot;, offset)) {</span>
<span class="fc bfc" id="L84" title="All 4 branches covered.">                    if (offset + 1 &lt; input.length() &amp;&amp; input.charAt(offset + 1) == '=') {</span>
<span class="fc" id="L85">                        offset += 2;</span>
<span class="fc" id="L86">                        retval = new EqualEqualToken();</span>
                    } else {
<span class="fc" id="L88">                        offset += 1;</span>
<span class="fc" id="L89">                        retval = new EqualToken();</span>
                    }
<span class="fc bfc" id="L91" title="All 2 branches covered.">                } else if (input.startsWith(&quot;\&quot;&quot;, offset)) {</span>
<span class="fc" id="L92">                    offset += 1;</span>
<span class="fc" id="L93">                    String frag = getStringLiteral(input, offset);</span>
<span class="fc" id="L94">                    offset += frag.length();</span>
<span class="fc" id="L95">                    retval = new StringLiteralToken(frag);</span>
<span class="fc" id="L96">                    offset += 1;</span>
<span class="fc bfc" id="L97" title="All 2 branches covered.">                } else if (Character.isDigit(input.charAt(0))) {</span>
<span class="fc" id="L98">                        String frag = getInt(input, offset);</span>
<span class="fc" id="L99">                        offset += frag.length();</span>
<span class="fc" id="L100">                        retval = (new IntegerToken(Integer.parseInt(frag)));</span>
<span class="fc" id="L101">                } else {</span>
<span class="fc" id="L102">                    throw new TokenizerException();</span>
                }
            }
        }
<span class="fc" id="L106">        return retval;</span>
    }

    public Token tryTokenizeVariableOrKeyword() {
<span class="fc" id="L110">        skipWhitespace();</span>
<span class="fc" id="L111">        String name = &quot;&quot;;</span>

<span class="pc bpc" id="L113" title="1 of 2 branches missed.">        if (offset &lt; input.length() &amp;&amp;</span>
<span class="fc bfc" id="L114" title="All 2 branches covered.">            Character.isLetter(input.charAt(offset))) {</span>
<span class="fc" id="L115">            name += input.charAt(offset);</span>
<span class="fc" id="L116">            offset++;</span>

<span class="fc bfc" id="L118" title="All 4 branches covered.">            while (offset &lt; input.length() &amp;&amp; Character.isLetterOrDigit(input.charAt(offset))) {</span>
<span class="fc" id="L119">                name += input.charAt(offset);</span>
<span class="fc" id="L120">                offset++;</span>
            }
<span class="fc bfc" id="L122" title="All 2 branches covered.">            if (name.equals(&quot;String&quot;))</span>
<span class="fc" id="L123">                return (new StringKeywordToken());</span>
<span class="fc bfc" id="L124" title="All 2 branches covered.">            else if (name.equals(&quot;class&quot;))</span>
<span class="fc" id="L125">                return new ClassKeywordToken();</span>
<span class="fc bfc" id="L126" title="All 2 branches covered.">            else if (name.equals(&quot;constructor&quot;))</span>
<span class="fc" id="L127">                return new ConstructorKeywordToken();</span>
<span class="fc bfc" id="L128" title="All 2 branches covered.">            else if (name.equals(&quot;else&quot;))</span>
<span class="fc" id="L129">                return new ElseToken();</span>
<span class="fc bfc" id="L130" title="All 2 branches covered.">            else if (name.equals(&quot;for&quot;))</span>
<span class="fc" id="L131">                return new ForToken();</span>
<span class="fc bfc" id="L132" title="All 2 branches covered.">            else if (name.equals(&quot;if&quot;))</span>
<span class="fc" id="L133">                return new IfToken();</span>
<span class="fc bfc" id="L134" title="All 2 branches covered.">            else if (name.equals(&quot;Int&quot;))</span>
<span class="fc" id="L135">                return new IntKeywordToken();</span>
<span class="fc bfc" id="L136" title="All 2 branches covered.">            else if (name.equals(&quot;new&quot;))</span>
<span class="fc" id="L137">                return new NewToken();</span>
<span class="fc bfc" id="L138" title="All 2 branches covered.">            else if (name.equals(&quot;clogln&quot;))</span>
<span class="fc" id="L139">                return new CloglnToken();</span>
<span class="fc bfc" id="L140" title="All 2 branches covered.">            else if (name.equals(&quot;clog&quot;))</span>
<span class="fc" id="L141">                return new ClogToken();</span>
<span class="fc bfc" id="L142" title="All 2 branches covered.">            else if (name.equals(&quot;return&quot;))</span>
<span class="fc" id="L143">                return new ReturnToken();</span>
<span class="fc bfc" id="L144" title="All 2 branches covered.">            else if (name.equals(&quot;this&quot;))</span>
<span class="fc" id="L145">                return new ThisToken();</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">            else if (name.equals(&quot;Void&quot;))</span>
<span class="fc" id="L147">                return new VoidToken();</span>
<span class="fc bfc" id="L148" title="All 2 branches covered.">            else if (name.equals(&quot;while&quot;))</span>
<span class="fc" id="L149">                return new WhileToken();</span>
<span class="fc bfc" id="L150" title="All 2 branches covered.">            else if (name.equals(&quot;true&quot;))</span>
<span class="fc" id="L151">                return new BoolValueToken(true);</span>
<span class="fc bfc" id="L152" title="All 2 branches covered.">            else if (name.equals(&quot;false&quot;))</span>
<span class="fc" id="L153">                return (new BoolValueToken(false));</span>
<span class="fc bfc" id="L154" title="All 2 branches covered.">            else if (name.equals(&quot;Bool&quot;))</span>
<span class="fc" id="L155">                return new BoolKeywordToken();</span>
<span class="fc bfc" id="L156" title="All 2 branches covered.">            else if (name.equals(&quot;length&quot;))</span>
<span class="fc" id="L157">                return new LengthToken();</span>
            else
<span class="fc" id="L159">                return new IdentifierToken(name);</span>
        } else {
<span class="fc" id="L161">            return null;</span>
        }
    }

    public void skipWhitespace() {
<span class="fc bfc" id="L166" title="All 4 branches covered.">        while (offset &lt; input.length() &amp;&amp; Character.isWhitespace(input.charAt(offset)))</span>
<span class="fc" id="L167">            offset++;</span>
<span class="fc" id="L168">    }</span>

    public String getStringLiteral(String s, int i) throws TokenizerException {
<span class="fc" id="L171">		skipWhitespace();</span>
<span class="fc" id="L172">        int j = i;</span>
<span class="pc bpc" id="L173" title="1 of 4 branches missed.">        while (j &lt; s.length()&amp;&amp;(s.charAt(j) != '\&quot;'))</span>
<span class="fc" id="L174">            j++;</span>
<span class="fc" id="L175">		return s.substring(i, j);</span>
    }

    public String getInt(String s, int i) throws TokenizerException {
<span class="fc" id="L179">		skipWhitespace();</span>
<span class="fc" id="L180">        int j = i;</span>
<span class="pc bpc" id="L181" title="1 of 4 branches missed.">        while (j &lt; s.length()&amp;&amp;Character.isDigit(s.charAt(j)))</span>
<span class="fc" id="L182">            j++;</span>
<span class="fc" id="L183">        return s.substring(i, j);</span>
    }

    public List &lt;Token&gt; tokenize() throws TokenizerException {
<span class="fc" id="L187">        final List &lt; Token &gt; tokens = new ArrayList &lt; Token &gt; ();</span>
<span class="fc" id="L188">        Token token = tokenizeSingle();</span>

<span class="fc bfc" id="L190" title="All 2 branches covered.">        while (token != null) {</span>
<span class="fc" id="L191">            tokens.add(token);</span>
<span class="fc" id="L192">            token = tokenizeSingle();</span>
        }
<span class="fc" id="L194">        return tokens;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>